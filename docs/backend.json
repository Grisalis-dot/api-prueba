{
  "entities": {
    "Asset": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Asset",
      "type": "object",
      "description": "Represents an IT asset, often referred to as a 'Nota', containing relevant information.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Asset entity.",
          "format": "uuid"
        },
        "title": {
          "type": "string",
          "description": "The title or name of the IT asset."
        },
        "body": {
          "type": "string",
          "description": "A detailed description or content related to the IT asset."
        },
        "brand": {
          "type": "string",
          "description": "The brand or manufacturer of the IT asset."
        },
        "creationDate": {
          "type": "string",
          "description": "The date and time when the IT asset was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "body",
        "brand",
        "creationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/assets/{assetId}",
        "definition": {
          "entityName": "Asset",
          "schema": {
            "$ref": "#/backend/entities/Asset"
          },
          "description": "Collection storing all IT assets. Access to this collection is restricted to users with an 'admin' role. Does not include denormalized authorization fields as access is determined by global role.",
          "params": [
            {
              "name": "assetId",
              "description": "The unique identifier for an IT asset."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "entityName": "user",
          "schema": {
            "$ref": "#/backend/entities/user"
          },
          "description": "Dedicated collection for identifying users with administrative privileges. The existence of a document with a user's UID as its ID grants the 'admin' role. This follows the 'Existence over Content' principle for global roles.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of a user who possesses the 'admin' role."
            }
          ]
        }
      }
    ],
    "reasoning": "The core design centers around a top-level collection, '/assets', for all IT assets. This approach directly supports the 'List all' requirement by allowing a single, performant query for all assets, without requiring complex server-side aggregation or insecure client-side filtering. Authorization Independence is achieved by treating asset management as an administrative function rather than user-specific data. All documents in the '/assets' collection will share the same security posture: only users with an 'admin' role can perform CRUD operations. The 'admin' role itself is managed via a separate, dedicated collection, '/roles_admin/{userId}', where the mere existence of a document signifies administrative privileges for that user. This implements the DBAC principle (roles stored in DB) and 'Existence over Content' for global roles.\n\nThis structure ensures secure QAPs (Queries Are Not Filters) for list operations on '/assets'. Security rules can simply check if `request.auth.uid` corresponds to an existing document in '/roles_admin'. For example, a rule would look like `allow read, write: if exists(/databases/$(database)/documents/roles_admin/$(request.auth.uid));`. This avoids `get()` calls on the asset documents themselves for authorization, making rules simple, robust, and easily debuggable. Since authorization is determined globally by a user's role, the 'Asset' documents do not need to denormalize owner IDs or membership maps, strictly adhering to Authorization Independence. All documents within '/assets' are homogeneous in their access requirements, fulfilling the Structural Segregation mandate."
  }
}